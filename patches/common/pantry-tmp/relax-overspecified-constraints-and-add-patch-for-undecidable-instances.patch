Index: ghc-pantry-tmp.spec
===================================================================
--- ghc-pantry-tmp.spec	(revision 3)
+++ ghc-pantry-tmp.spec	(working copy)
@@ -96,6 +96,7 @@
 BuildRequires:  ghc-hspec-devel
 BuildRequires:  ghc-raw-strings-qq-devel
 %endif
+Patch01:        enable-undecidable-instances-extension.patch
 
 %description
 Content addressable Haskell package management.
@@ -116,6 +117,11 @@
 cp -p %{SOURCE1} %{pkg_name}.cabal
 echo > Setup.hs 'import Distribution.Simple'
 echo >>Setup.hs 'main = defaultMain'
+cabal-tweak-dep-ver cryptonite '==0.25.*' '< 1'
+cabal-tweak-dep-ver persistent '<2.10' '< 2.11'
+cabal-tweak-dep-ver persistent-sqlite '<2.10' '<2.11'
+cabal-tweak-dep-ver persistent-template '<2.7' '< 2.8'
+%patch01 -p5
 
 %build
 %ghc_lib_build

