Index: xmonad.spec
===================================================================
--- xmonad.spec	(revision 6)
+++ xmonad.spec	(working copy)
@@ -26,5 +26,6 @@
 Group:          Development/Libraries/Haskell
 URL:            https://hackage.haskell.org/package/%{name}
 Source0:        https://hackage.haskell.org/package/%{name}-%{version}/%{name}-%{version}.tar.gz
+Source10:       xmonad.desktop
 BuildRequires:  chrpath
 BuildRequires:  ghc-Cabal-devel
@@ -41,9 +42,14 @@
 BuildRequires:  ghc-setlocale-devel
 BuildRequires:  ghc-unix-devel
 BuildRequires:  ghc-utf8-string-devel
+BuildRequires:  pkgconfig
+BuildRequires:  update-desktop-files
+BuildRequires:  pkgconfig(xinerama)
+Suggests:       ghc-xmonad-contrib-devel
+Suggests:       ghc-xmonad-devel
 %if %{with tests}
 BuildRequires:  ghc-QuickCheck-devel
 %endif
 
 %description
 Xmonad is a tiling window manager for X. Windows are arranged automatically to
@@ -86,5 +92,14 @@
 %install
 %ghc_lib_install
+install -d %{buildroot}%{_mandir}/man1/
+mv %{buildroot}%{_datadir}/%{name}-%{version}/man/%{name}.1 %{buildroot}%{_mandir}/man1/
+gzip %{buildroot}%{_mandir}/man1/%{name}.1
+# Gzipping here because when we gzip it in %%build step, it breaks cabal setup
+
+%define desktop_src %{buildroot}%{_datadir}/xsessions/xmonad.desktop
+install -m0644 -D %{SOURCE10} %{desktop_src}
+%suse_update_desktop_file %{desktop_src}
+
 %ghc_fix_rpath %{pkg_name}-%{version}
 
 
@@ -109,7 +124,8 @@
 %dir %{_datadir}/%{name}-%{version}
 %dir %{_datadir}/%{name}-%{version}/man
 %{_datadir}/%{name}-%{version}/man/xmonad.hs
-%{_datadir}/%{name}-%{version}/man/xmonad.1
+%{_mandir}/man1/xmonad.1%{ext_man}
 %{_datadir}/%{name}-%{version}/man/xmonad.1.html
+%{_datadir}/xsessions/xmonad.desktop
 
 %files -n ghc-%{name} -f ghc-%{name}.files

