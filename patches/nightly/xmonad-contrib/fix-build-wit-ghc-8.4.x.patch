## diff on expanded link not possible, showing unexpanded version
Index: ghc-xmonad-contrib.spec
===================================================================
--- ghc-xmonad-contrib.spec (revision 1)
+++ ghc-xmonad-contrib.spec (revision 2)
@@ -1,7 +1,7 @@
 #
-# spec file for package ghc-xmonad-contrib
+# spec file for package ghc
 #
-# Copyright (c) 2017 SUSE LINUX GmbH, Nuernberg, Germany.
+# Copyright (c) 2018 SUSE LINUX GmbH, Nuernberg, Germany.
 #
 # All modifications and additions to the file contributed by third parties
 # remain the property of their copyright owners, unless otherwise agreed
@@ -25,6 +25,7 @@
 Group:          Development/Libraries/Haskell
 URL:            https://hackage.haskell.org/package/%{pkg_name}
 Source0:        https://hackage.haskell.org/package/%{pkg_name}-%{version}/%{pkg_name}-%{version}.tar.gz
+Patch0:         236.patch
 BuildRequires:  ghc-Cabal-devel
 BuildRequires:  ghc-X11-devel
 BuildRequires:  ghc-X11-xft-devel
@@ -39,6 +40,7 @@
 BuildRequires:  ghc-process-devel
 BuildRequires:  ghc-random-devel
 BuildRequires:  ghc-rpm-macros
+BuildRequires:  ghc-semigroups-devel
 BuildRequires:  ghc-unix-devel
 BuildRequires:  ghc-utf8-string-devel
 BuildRequires:  ghc-xmonad-devel
@@ -70,6 +72,7 @@
 
 %prep
 %setup -q -n %{pkg_name}-%{version}
+%patch0 -p1
 
 %build
 %ghc_lib_build
Index: 236.patch
===================================================================
--- 236.patch (added)
+++ 236.patch (revision 2)
@@ -0,0 +1,111 @@
+From 86595e193e8d46c769ab2a1cee961e8e04dfd1b9 Mon Sep 17 00:00:00 2001
+From: Michiel Derhaeg <derhaeg.michiel@gmail.com>
+Date: Tue, 20 Mar 2018 22:06:18 +0100
+Subject: [PATCH] update to work with GHC 8.4.1
+
+---
+ CHANGES.md                      | 15 +++++++++++++++
+ XMonad/Hooks/FadeWindows.hs     |  6 +++++-
+ XMonad/Hooks/WallpaperSetter.hs |  6 +++++-
+ XMonad/Layout/Mosaic.hs         |  6 +++++-
+ xmonad-contrib.cabal            |  5 +++--
+ 5 files changed, 33 insertions(+), 5 deletions(-)
+
+Index: xmonad-contrib-0.13/XMonad/Hooks/FadeWindows.hs
+===================================================================
+--- xmonad-contrib-0.13.orig/XMonad/Hooks/FadeWindows.hs
++++ xmonad-contrib-0.13/XMonad/Hooks/FadeWindows.hs
+@@ -61,7 +61,8 @@ import           Control.Monad.Reader
+                                                          ,asks)
+ import           Control.Monad.State                     (gets)
+ import qualified Data.Map                    as M
+-import           Data.Monoid
++import           Data.Monoid                      hiding ((<>))
++import           Data.Semigroup
+ 
+ import           Graphics.X11.Xlib.Extras                (Event(..))
+ 
+@@ -134,6 +135,9 @@ instance Monoid Opacity where
+   r      `mappend` OEmpty = r
+   _      `mappend` r      = r
+ 
++instance Semigroup Opacity where
++  (<>) = mappend
++
+ -- | A FadeHook is similar to a ManageHook, but records window opacity.
+ type FadeHook = Query Opacity
+ 
+Index: xmonad-contrib-0.13/XMonad/Hooks/WallpaperSetter.hs
+===================================================================
+--- xmonad-contrib-0.13.orig/XMonad/Hooks/WallpaperSetter.hs
++++ xmonad-contrib-0.13/XMonad/Hooks/WallpaperSetter.hs
+@@ -41,7 +41,8 @@ import Data.Ord (comparing)
+ import Control.Monad
+ import Control.Applicative
+ import Data.Maybe
+-import Data.Monoid
++import Data.Monoid hiding ((<>))
++import Data.Semigroup
+ 
+ -- $usage
+ -- This module requires imagemagick and feh to be installed, as these are utilized
+@@ -86,6 +87,9 @@ instance Monoid WallpaperList where
+   mappend (WallpaperList w1) (WallpaperList w2) =
+     WallpaperList $ M.toList $ (M.fromList w2) `M.union` (M.fromList w1)
+ 
++instance Semigroup WallpaperList where
++  (<>) = mappend
++
+ -- | Complete wallpaper configuration passed to the hook
+ data WallpaperConf = WallpaperConf {
+     wallpaperBaseDir :: FilePath  -- ^ Where the wallpapers reside (if empty, will look in \~\/.wallpapers/)
+Index: xmonad-contrib-0.13/XMonad/Layout/Mosaic.hs
+===================================================================
+--- xmonad-contrib-0.13.orig/XMonad/Layout/Mosaic.hs
++++ xmonad-contrib-0.13/XMonad/Layout/Mosaic.hs
+@@ -38,7 +38,8 @@ import Control.Monad(mplus)
+ import Data.Foldable(Foldable,foldMap, sum)
+ import Data.Function(on)
+ import Data.List(sortBy)
+-import Data.Monoid(Monoid,mempty, mappend)
++import Data.Monoid(Monoid,mempty, mappend, (<>))
++import Data.Semigroup
+ 
+ 
+ -- $usage
+@@ -202,6 +203,9 @@ instance Monoid (Tree a) where
+     mappend x Empty = x
+     mappend x y = Branch x y
+ 
++instance Semigroup (Tree a) where
++    (<>) = mappend
++
+ makeTree ::  (Num a1, Ord a1) => (a -> a1) -> [a] -> Tree a
+ makeTree _ [] = Empty
+ makeTree _ [x] = Leaf x
+Index: xmonad-contrib-0.13/xmonad-contrib.cabal
+===================================================================
+--- xmonad-contrib-0.13.orig/xmonad-contrib.cabal
++++ xmonad-contrib-0.13/xmonad-contrib.cabal
+@@ -35,7 +35,7 @@ cabal-version:      >= 1.6
+ build-type:         Simple
+ bug-reports:        https://github.com/xmonad/xmonad-contrib/issues
+ 
+-tested-with: GHC==7.6.3, GHC==7.8.4, GHC==7.10.3, GHC==8.0.1
++tested-with: GHC==7.6.3, GHC==7.8.4, GHC==7.10.3, GHC==8.0.1, GHC==8.2.2, GHC==8.4.1
+ 
+ source-repository head
+   type:     git
+@@ -63,9 +63,10 @@ library
+                    random,
+                    mtl >= 1 && < 3,
+                    unix,
+-                   X11>=1.6.1 && < 1.9,
++                   X11>=1.6.1 && < 1.10,
+                    xmonad>=0.13   && < 0.14,
+-                   utf8-string
++                   utf8-string,
++                   semigroups
+ 
+     if flag(use_xft)
+         build-depends: X11-xft >= 0.2

